<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="common.css" />
    <title>Danbooru Tools - Settings</title>

    <script src="scripts/load-settings.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // Add external link listeners
        document.getElementById("open-deepl").addEventListener("click", (e) => {
          e.preventDefault();
          nw.Shell.openExternal("https://www.deepl.com/en/your-account/keys");
          return false;
        });

        document
          .getElementById("open-danbooru")
          .addEventListener("click", (e) => {
            e.preventDefault();
            nw.Shell.openExternal(
              `${localStorage.getItem("general.site") || "https://danbooru.donmai.us"}/profile`,
            );
            return false;
          });

        document.getElementById("theme").addEventListener("change", (e) => {
          document.documentElement.setAttribute(
            "data-theme",
            e.target.value || "light",
          );
        });
      });
    </script>
  </head>
  <body>
    <header>
      <a href="index.html">Home</a>
      <a href="commentary.html">Commentary Tools</a>
      <a href="image.html">Image Tools</a>
      <a href="settings.html" id="current-page">Settings</a>
    </header>

    <h1>Settings</h1>
    <!--
    All settings:
    - General
      - general.theme: Theme (light/dark) [disabled for now]
      - general.domain: Default Site Domain
    - API Keys
      - api.deepl: DeepL API Key
      - api.danbooru.username: Danbooru Username
      - api.danbooru.key: Danbooru API Key
    -->

    <fieldset>
      <legend>General Settings</legend>
      <div class="input-group">
        <label for="theme">Theme:</label>
        <select id="theme" name="general.theme" class="setting">
          <option value="light">Light</option>
          <option value="dark">Dark</option>
        </select>
      </div>

      <div class="input-group">
        <label for="default-site">Default Site Domain:</label>
        <input
          type="text"
          id="default-site"
          name="general.domain"
          class="setting"
          placeholder="danbooru.donmai.us"
        />
      </div>
    </fieldset>

    <fieldset>
      <legend>API Settings</legend>
      <div class="input-group">
        <label for="deepl-api-key">DeepL API Key:</label>
        <input
          type="password"
          id="deepl-api-key"
          name="api.deepl"
          class="setting"
        />
        <small>(From <a href="#" id="open-deepl">your DeepL account</a>)</small>
      </div>
      <hr />
      <div class="input-group">
        <label for="danbooru-username">Danbooru Username:</label>
        <input
          type="text"
          id="danbooru-username"
          name="api.danbooru.username"
          class="setting"
        />
      </div>
      <div class="input-group">
        <label for="danbooru-api-key">Danbooru API Key:</label>
        <input
          type="password"
          id="danbooru-api-key"
          name="api.danbooru.key"
          class="setting"
        />
        <small
          >(From
          <a href="#" id="open-danbooru">your Danbooru account</a>)</small
        >
      </div>
    </fieldset>
  </body>
</html>
