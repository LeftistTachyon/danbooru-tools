<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="common.css" />
    <title>Danbooru Tools - Settings</title>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const settingsElements = document.querySelectorAll(".setting");

        // Load settings from localStorage
        settingsElements.forEach((element) => {
          const settingName = element.name;
          const savedValue = localStorage.getItem(settingName);
          if (savedValue !== null) {
            if (element.type === "checkbox") {
              element.checked = savedValue === "true";
            } else {
              element.value = savedValue;
            }
          }

          // Save settings to localStorage on change
          element.addEventListener("change", () => {
            const valueToSave =
              element.type === "checkbox" ? element.checked : element.value;
            localStorage.setItem(settingName, valueToSave);
          });
        });
      });
    </script>
  </head>
  <body>
    <header>
      <a href="index.html">Home</a>
      <a href="commentary.html">Commentary Tools</a>
      <a href="settings.html" id="current-page">Settings</a>
    </header>

    <h1>Settings</h1>
    <!--
    All settings:
    - General
      - general.theme: Theme (light/dark) [disabled for now]
      - general.site: Default Site Domain
    - API Keys
      - api.deepl: DeepL API Key
      - api.danbooru.username: Danbooru Username
      - api.danbooru.key: Danbooru API Key
    -->

    <fieldset>
      <legend>General Settings</legend>
      <div class="input-group">
        <label for="theme">Theme:</label>
        <select id="theme" name="general.theme" class="setting" disabled>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
        </select>
      </div>

      <div class="input-group">
        <label for="default-site">Default Site Domain:</label>
        <input
          type="text"
          id="default-site"
          name="general.site"
          class="setting"
          placeholder="danbooru.donmai.us"
        />
      </div>
    </fieldset>

    <fieldset>
      <legend>API Settings</legend>
      <div class="input-group">
        <label for="deepl-api-key">DeepL API Key:</label>
        <input
          type="password"
          id="deepl-api-key"
          name="api.deepl"
          class="setting"
        />
        <a href="https://www.deepl.com/en/your-account/keys" target="_blank"
          ><small>(Get your API key here)</small></a
        >
      </div>
      <hr />
      <div class="input-group">
        <label for="danbooru-username">Danbooru Username:</label>
        <input
          type="text"
          id="danbooru-username"
          name="api.danbooru.username"
          class="setting"
        />
      </div>
      <div class="input-group">
        <label for="danbooru-api-key">Danbooru API Key:</label>
        <input
          type="password"
          id="danbooru-api-key"
          name="api.danbooru.key"
          class="setting"
        />
        <small>(From your profile page)</small>
      </div>
    </fieldset>
  </body>
</html>
