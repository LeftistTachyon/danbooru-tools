<!doctype html>
<html>
  <head>
    <link rel="stylesheet" href="common.css" />
    <title>Danbooru Tools - Commentary Tools</title>

    <script src="scripts/load-settings.js"></script>
    <script src="scripts/danbooru.js" type="module"></script>

    <style>
      #errorMsg {
        color: red;
      }

      #outer-box {
        flex: 1;
        display: flex;
        align-items: stretch;
        gap: 12px;
      }
      .inner-box {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: stretch;
      }

      textarea {
        resize: none;
      }
      h4 {
        margin-bottom: 4px;
        margin-top: 8px;
      }
      body {
        display: flex;
        flex-direction: column;
      }

      .center {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 12px;
        margin-top: 12px;
      }
      .center > label {
        margin-right: 4px;
      }
    </style>
  </head>
  <body>
    <header>
      <a href="index.html">Home</a>
      <a href="commentary.html" id="current-page">Commentary Tools</a>
      <a href="settings.html">Settings</a>
    </header>

    <h1 style="margin-top: 0">Commentary Tools</h1>

    <form action="#" id="get-posts-form">
      <fieldset>
        <legend>Pool Settings</legend>
        <div
          class="input-group"
          style="display: flex; align-items: center; gap: 4px"
        >
          <label for="tag-string">Tag string:</label>
          <input
            type="text"
            id="tag-string"
            class="setting"
            name="cache.tagstring"
            value="commentary_request"
            style="flex: 1"
            required
          />
        </div>

        <div class="input-group">
          <label for="post-limit">Max # of posts:</label>
          <input
            type="number"
            id="post-limit"
            value="100"
            min="1"
            max="200"
            required
          />
        </div>

        <div class="input-group">
          <input type="checkbox" id="include-partial" />
          <label for="include-partial">Include non-empty commentaries</label>
        </div>

        <input type="submit" value="Fetch posts" />
      </fieldset>
    </form>
    <span id="errorMsg" style="display: none"></span>
    <span id="infoMsg" style="display: none"></span>

    <div id="outer-box">
      <div class="inner-box">
        <h4>Original title</h4>
        <input type="text" id="original-title" readonly />
        <h4>Original description</h4>
        <textarea id="original-description" readonly style="flex: 1"></textarea>
      </div>

      <div class="inner-box">
        <h4>DeepL'd title</h4>
        <input type="text" id="deepl-title" readonly />
        <h4>DeepL'd description</h4>
        <textarea id="deepl-description" readonly style="flex: 1"></textarea>
      </div>

      <div class="inner-box" style="flex: 0">
        <h4>&nbsp;</h4>
        <button id="title-copier">&rarr;</button>
        <h4>&nbsp;</h4>
        <div style="flex: 1; display: flex; align-items: center">
          <button id="description-copier">&rarr;</button>
        </div>
      </div>

      <div class="inner-box">
        <h4>Translated title</h4>
        <input type="text" id="translated-title" />
        <h4>Translated description</h4>
        <textarea id="translated-description" style="flex: 1"></textarea>
      </div>
    </div>

    <div class="center" style="gap: 4px">
      <input type="checkbox" id="commentary" />
      <label for="commentary">commentary</label>
      <input type="checkbox" id="commentary_request" />
      <label for="commentary_request">commentary_request</label>
      <input type="checkbox" id="commentary_check" />
      <label for="commentary_check">commentary_check</label>
      <input type="checkbox" id="partial_commentary" />
      <label for="partial_commentary">partial_commentary</label>
    </div>
    <div class="center">
      <button id="open-btn" title="Shortcut: Ctrl+D">Open in browser</button>
      <button id="overwrite-btn" title="Shortcut: Ctrl+E">
        Overwrite previous translation
      </button>
      <button id="submit-btn" title="Shortcut: Ctrl+Enter">Submit</button>
    </div>
    <div class="center">
      <button id="first-post" title="Shortcut: Shift+A" disabled>
        &lt;&lt;
      </button>
      <button id="prev-post" title="Shortcut: A" disabled>&lt;</button>
      <span
        id="post-counter"
        title="Current post # / Total posts to go through (Total posts fetched)"
        >0 / 0 (0)</span
      >
      <button id="next-post" title="Shortcut: D" disabled>&gt;</button>
      <button id="next-unique-post" title="Shortcut: Ctrl+D" disabled>
        |&gt;
      </button>
      <button id="last-post" title="Shortcut: Shift+D" disabled>
        &gt;&gt;
      </button>
    </div>
  </body>
</html>
